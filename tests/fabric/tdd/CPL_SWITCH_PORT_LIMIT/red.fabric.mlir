// RUN: not loom --adg %s 2>&1 | FileCheck %s
// CHECK: CPL_SWITCH_PORT_LIMIT

// 257 inputs exceeds the 256-port limit.
fabric.module @test(
  %i0: i32, %i1: i32, %i2: i32, %i3: i32,
  %i4: i32, %i5: i32, %i6: i32, %i7: i32,
  %i8: i32, %i9: i32, %i10: i32, %i11: i32,
  %i12: i32, %i13: i32, %i14: i32, %i15: i32,
  %i16: i32, %i17: i32, %i18: i32, %i19: i32,
  %i20: i32, %i21: i32, %i22: i32, %i23: i32,
  %i24: i32, %i25: i32, %i26: i32, %i27: i32,
  %i28: i32, %i29: i32, %i30: i32, %i31: i32,
  %i32: i32, %i33: i32, %i34: i32, %i35: i32,
  %i36: i32, %i37: i32, %i38: i32, %i39: i32,
  %i40: i32, %i41: i32, %i42: i32, %i43: i32,
  %i44: i32, %i45: i32, %i46: i32, %i47: i32,
  %i48: i32, %i49: i32, %i50: i32, %i51: i32,
  %i52: i32, %i53: i32, %i54: i32, %i55: i32,
  %i56: i32, %i57: i32, %i58: i32, %i59: i32,
  %i60: i32, %i61: i32, %i62: i32, %i63: i32,
  %i64: i32, %i65: i32, %i66: i32, %i67: i32,
  %i68: i32, %i69: i32, %i70: i32, %i71: i32,
  %i72: i32, %i73: i32, %i74: i32, %i75: i32,
  %i76: i32, %i77: i32, %i78: i32, %i79: i32,
  %i80: i32, %i81: i32, %i82: i32, %i83: i32,
  %i84: i32, %i85: i32, %i86: i32, %i87: i32,
  %i88: i32, %i89: i32, %i90: i32, %i91: i32,
  %i92: i32, %i93: i32, %i94: i32, %i95: i32,
  %i96: i32, %i97: i32, %i98: i32, %i99: i32,
  %i100: i32, %i101: i32, %i102: i32, %i103: i32,
  %i104: i32, %i105: i32, %i106: i32, %i107: i32,
  %i108: i32, %i109: i32, %i110: i32, %i111: i32,
  %i112: i32, %i113: i32, %i114: i32, %i115: i32,
  %i116: i32, %i117: i32, %i118: i32, %i119: i32,
  %i120: i32, %i121: i32, %i122: i32, %i123: i32,
  %i124: i32, %i125: i32, %i126: i32, %i127: i32,
  %i128: i32, %i129: i32, %i130: i32, %i131: i32,
  %i132: i32, %i133: i32, %i134: i32, %i135: i32,
  %i136: i32, %i137: i32, %i138: i32, %i139: i32,
  %i140: i32, %i141: i32, %i142: i32, %i143: i32,
  %i144: i32, %i145: i32, %i146: i32, %i147: i32,
  %i148: i32, %i149: i32, %i150: i32, %i151: i32,
  %i152: i32, %i153: i32, %i154: i32, %i155: i32,
  %i156: i32, %i157: i32, %i158: i32, %i159: i32,
  %i160: i32, %i161: i32, %i162: i32, %i163: i32,
  %i164: i32, %i165: i32, %i166: i32, %i167: i32,
  %i168: i32, %i169: i32, %i170: i32, %i171: i32,
  %i172: i32, %i173: i32, %i174: i32, %i175: i32,
  %i176: i32, %i177: i32, %i178: i32, %i179: i32,
  %i180: i32, %i181: i32, %i182: i32, %i183: i32,
  %i184: i32, %i185: i32, %i186: i32, %i187: i32,
  %i188: i32, %i189: i32, %i190: i32, %i191: i32,
  %i192: i32, %i193: i32, %i194: i32, %i195: i32,
  %i196: i32, %i197: i32, %i198: i32, %i199: i32,
  %i200: i32, %i201: i32, %i202: i32, %i203: i32,
  %i204: i32, %i205: i32, %i206: i32, %i207: i32,
  %i208: i32, %i209: i32, %i210: i32, %i211: i32,
  %i212: i32, %i213: i32, %i214: i32, %i215: i32,
  %i216: i32, %i217: i32, %i218: i32, %i219: i32,
  %i220: i32, %i221: i32, %i222: i32, %i223: i32,
  %i224: i32, %i225: i32, %i226: i32, %i227: i32,
  %i228: i32, %i229: i32, %i230: i32, %i231: i32,
  %i232: i32, %i233: i32, %i234: i32, %i235: i32,
  %i236: i32, %i237: i32, %i238: i32, %i239: i32,
  %i240: i32, %i241: i32, %i242: i32, %i243: i32,
  %i244: i32, %i245: i32, %i246: i32, %i247: i32,
  %i248: i32, %i249: i32, %i250: i32, %i251: i32,
  %i252: i32, %i253: i32, %i254: i32, %i255: i32,
  %i256: i32
) -> (i32) {
  %o = fabric.switch %i0, %i1, %i2, %i3, %i4, %i5, %i6, %i7, %i8, %i9, %i10, %i11, %i12, %i13, %i14, %i15, %i16, %i17, %i18, %i19, %i20, %i21, %i22, %i23, %i24, %i25, %i26, %i27, %i28, %i29, %i30, %i31, %i32, %i33, %i34, %i35, %i36, %i37, %i38, %i39, %i40, %i41, %i42, %i43, %i44, %i45, %i46, %i47, %i48, %i49, %i50, %i51, %i52, %i53, %i54, %i55, %i56, %i57, %i58, %i59, %i60, %i61, %i62, %i63, %i64, %i65, %i66, %i67, %i68, %i69, %i70, %i71, %i72, %i73, %i74, %i75, %i76, %i77, %i78, %i79, %i80, %i81, %i82, %i83, %i84, %i85, %i86, %i87, %i88, %i89, %i90, %i91, %i92, %i93, %i94, %i95, %i96, %i97, %i98, %i99, %i100, %i101, %i102, %i103, %i104, %i105, %i106, %i107, %i108, %i109, %i110, %i111, %i112, %i113, %i114, %i115, %i116, %i117, %i118, %i119, %i120, %i121, %i122, %i123, %i124, %i125, %i126, %i127, %i128, %i129, %i130, %i131, %i132, %i133, %i134, %i135, %i136, %i137, %i138, %i139, %i140, %i141, %i142, %i143, %i144, %i145, %i146, %i147, %i148, %i149, %i150, %i151, %i152, %i153, %i154, %i155, %i156, %i157, %i158, %i159, %i160, %i161, %i162, %i163, %i164, %i165, %i166, %i167, %i168, %i169, %i170, %i171, %i172, %i173, %i174, %i175, %i176, %i177, %i178, %i179, %i180, %i181, %i182, %i183, %i184, %i185, %i186, %i187, %i188, %i189, %i190, %i191, %i192, %i193, %i194, %i195, %i196, %i197, %i198, %i199, %i200, %i201, %i202, %i203, %i204, %i205, %i206, %i207, %i208, %i209, %i210, %i211, %i212, %i213, %i214, %i215, %i216, %i217, %i218, %i219, %i220, %i221, %i222, %i223, %i224, %i225, %i226, %i227, %i228, %i229, %i230, %i231, %i232, %i233, %i234, %i235, %i236, %i237, %i238, %i239, %i240, %i241, %i242, %i243, %i244, %i245, %i246, %i247, %i248, %i249, %i250, %i251, %i252, %i253, %i254, %i255, %i256 : i32 -> i32
  fabric.yield %o : i32
}
